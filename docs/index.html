<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dual Active Bridge Development Board: Dual Active Bridge Development Board</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="border:0px; border-spacing: 0px; border-collapse: collapse; vertical-align: middle; width: 100%;">
    <tbody>
        <tr style="border: none; background-color: #00000000;">
            <!--SITE HEADER-->
            <td style="width: 120px; border: none;">
                <img alt="Bar" height="60px" src="images/mchp-brandingelement-rgb2.png"/>
            </td>
            <td style="width: 220px; border: none;">
                <img alt="Logo" height=50px src="images/microchip.png"/>
            </td>
            <td colspan="4" style="font-size: 16pt; font-weight: bolder;">
                Dual Active Bridge Development Board (Part-No. ) 
            </td>
            <td style="text-align: right; vertical-align: middle;">
                        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
            </td>
            <!--END SITE HEADER-->
        </tr>
        <tr style="height:36px; border:none; background-color: #000000b0;">
            <td style="width: 70px; color: white; font-size:14px; font-weight: bolder; margin-left: 30px;">
                <div style="margin-left: 30px;">Content</div>
            </td>
            <td style="width: 10px; color: white; font-size:14px; font-weight: bolder;">
                &nbsp;
            </td>
            <td style="width: 100px; color: white; font-size:14px; font-weight: bolder;">
                <!-- Overview -->
            </td>
            <td style="width: 130px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Documentation -->
            </td>
            <td style="width: 170px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Additional Resources -->
            </td>
            <td style="width: auto; color: white; font-size:14px; font-weight: bolder;"> 
              &nbsp;
            </td>
            <td style="width: 310px; margin-right: 30px; color: white; font-size:10px; font-weight: lighter; text-align: right;">
                &nbsp;
            </td>
        </tr>
    </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Dual Active Bridge Development Board </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a> </p><div class="image">
<img src="microchip.png" alt=""/>
<div class="caption">
image</div></div>
    <hr  />
 <h1><a class="anchor" id="autotoc_md1"></a>
Dual Active Bridge Development Board</h1>
<center> </center><center> <img src="images/DAB-board-front.jpg" alt="dsPIC33C DAB Development Board" width="400" class="inline"/>  </center> <center>  dsPIC33C DAB Development Board  </center> <hr  />
<h2><a class="anchor" id="autotoc_md3"></a>
Summary</h2>
<p>This solution showcases the implementation of a Dual Active Bridge (DAB) application demonstration utilizing Microchip's dsPIC33C device, primarily aimed at automotive On-Board Charger applications. The DC-DC Dual Active Bridge Development Platform is a versatile development board featuring well-organized components, including an input filter, power stage, auxiliary supply, and a socket compatible with Microchip's latest Digital Power Plug-In Modules (DP PIMs).</p>
<p>The platform is designed to handle voltage levels of up to 800 VDC on the primary side and up to 900 VDC on the secondary side. Additionally, it includes a socket for dsPIC33 plug-in modules, enabling the system to be tested with various controllers. The pinout is compatible with EP, CK, and CH dsPIC DSC DP PIMs, ensuring flexibility and ease of use.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md5"></a>
Highlights</h2>
<ul>
<li>Digitally-Controlled Dual Active Bridge Converter</li>
<li>Utilization of dsPIC peripherals that allows switching frequency operation ranging from 65KHz to 300KHz</li>
<li>dspic33 plug-in module mating socket pinout compatible to other DSC DP PIMs.</li>
<li>Can be operated in forward and reverse mode operation</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md7"></a>
Related Documentation</h2>
<p><b>Firmware Documentation</b></p>
<ul>
<li><a href="https://microchip-pic-avr-examples.github.io/dspic33ck-power-dcdc-dual-active-bridge-development-platform/">Online Firmware Documentation of this Code Example</a></li>
</ul>
<p><b>Firmware Version</b></p><ul>
<li><a href="https://mplab-discover.microchip.com/com.microchip.mplabx.project.dspic33ck-power-dcdc-dual-active-bridge-development-platform/1.0.0">Forward Direction Operation Firmware Code version 1.0</a></li>
<li><a href="https://mplab-discover.microchip.com/com.microchip.mplabx.project.dspic33ck-power-dcdc-dual-active-bridge-development-platform/2.0.0">Forward and Reverse Direction Operation Firmware Code version 2.0</a></li>
</ul>
<p><b>Hardware Documentation</b></p>
<ul>
<li><a href="https://www.microchip.com/en-us/tools-resources/reference-designs/11-kw-dual-active-bridge-dc-dc-demonstration-application">11kW Dual Active Bridge DC-DC Demonstration Application</a></li>
<li><a href="https://www.microchip.com/70005524">Isolated Voltage Acquisition Board User’s Guide</a></li>
<li><a href="https://www.microchip.com/50003512">SiC FET Plug-In Module (SiC FET PIM) User’s Guide</a></li>
<li>Operational Manual</li>
<li>Users Guide</li>
</ul>
<p><b>Target Device Documentation</b></p>
<ul>
<li><a href="https://www.microchip.com/70005349">dsPIC33CK256MP508 Family Data Sheet</a></li>
<li><a href="https://www.microchip.com/80000796">dsPIC33CK256MP508 Family Silicon Errata and Data Sheet Clarification</a></li>
</ul>
<p><b>Please always check for the latest data sheets on the respective product websites:</b></p>
<ul>
<li><a href="https://www.microchip.com/dsPIC33CK256MP508">dsPIC33CK256MP508 Family</a></li>
<li><a href="https://www.microchip.com/dsPIC33CH512MP508">dsPIC33CH512MP508 Family</a></li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md9"></a>
Software Used</h2>
<ul>
<li><a href="https://www.microchip.com/en-us/software-library/power_board_visualizer">Power Board Visualizer GUI</a></li>
<li><a href="https://www.microchip.com/en-us/tools-resources/develop/mplab-x-ide">MPLAB&reg; X IDE v6.20</a></li>
<li><a href="https://www.microchip.com/en-us/tools-resources/develop/mplab-xc-compilers/xc-dsc">MPLAB&reg; XC-DSC Compiler v3.10</a></li>
<li><a href="https://www.microchip.com/mplab/mplab-code-configurator">Microchip Code Configurator v5.5.1</a></li>
<li><a href="https://www.microchip.com/developmenttools/ProductDetails/DCDT">Digital Compensator Design Tool</a></li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md11"></a>
Hardware Used</h2>
<ul>
<li>dsPIC33C Dual Active Bridge Development Board<ul>
<li>Power Board</li>
<li>Isolated Voltage Acquisition Board</li>
<li>SiC FET PIM</li>
</ul>
</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md13"></a>
Directory Structure</h2>
<p>The directory structure for this project is summarized below. </p><pre class="fragment">├───dspic33ck-dab.X           DAB main project 
├───images                    Images for the Readme 
├───power_board_visualizer_xmls   Power Board Visualizer Projects
├───pre_compiled_hex_files    Pre compiled Hex files for 400V output operation 
└───sources                   Common Sources between both projects
</pre> <hr  />
<h2><a class="anchor" id="autotoc_md14"></a>
Programming Hex File using available hex files</h2>
<p>In this example ICD4 is being used, but any of the available debuggers/programmers can be used.</p>
<ol type="1">
<li>Open <em>MPLAB X IPE</em></li>
<li>Select the device on DP-PIM : <em>dsPIC33CK256MP506</em></li>
<li>Connect computer to ICD4 via USB cable, connect ICD4 to 6 pin header on DP-PIM via RJ11 cable and RJ11 to ICSP adapter.</li>
<li>Power the dpPIM through a microUSB cable.</li>
<li>Click <em>Connect</em> on the MPLAB X IPE</li>
<li>Wait for the device to connect</li>
<li>Navigate to the folder pre_compiled_hex_files, and select the correct hex file</li>
<li>Click <em>Program</em></li>
<li>Wait for the program/verify complete message.</li>
<li>Disconnect programmer from Digital Power Plug-in Module.</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md16"></a>
Quick Start Guide</h2>
<p>This Section will guide you on how to run and control the DAB application using power board visualizer, once the electrical connections are made.</p>
<h3>Hardware Setup</h3>
<p>Please consult the operational manual for DAB hardware setup considerations and verify that the correct load and source selections have been made. This readme does not include the electrical setup for the DAB Application board.</p>
<p>To enable CAN communication from the PC to the DAB application board, a USB to CAN dongle is required. Note that the Power Board Visualizer is compatible only with PEAK System USB CAN-FD dongles. You can use an RS232 DB9 Straight Through cable to connect the DAB board to the PEAK dongle.</p>
<center> </center><center> <img src="images/dab-connection-forward.jpg" alt="dsPIC33C DAB Development Board Hardware set-up" width="800" class="inline"/>  </center> <center>  dsPIC33C DAB Development Board Hardware set-up for Forward mode Operation  </center> <center> </center><center> <img src="images/dab-connection.jpg" alt="dsPIC33C DAB Development Board Hardware set-up" width="800" class="inline"/>  </center> <center>  dsPIC33C DAB Development Board Hardware set-up for Reverse mode Operation  </center> <h3>Powering On board through Power Board Visualizer</h3>
<h4>Prerequisites</h4>
<p>Following software must be installed on your pc to control/communicate between Power Board Visualizer and dsPIC33CK.</p><ul>
<li>Power Board Visualizer V2</li>
<li>Peak System USB Drivers</li>
</ul>
<h4>Setting up and Connecting the Power Board Visualizer</h4>
<p>After completing the hardware setup, go to the power board visualizer XMLs folder. Open the appropriate project using Power Board Visualizer. Once the project is open, you will see the following screen.</p>
<center><a href="images/dab-pbv.jpg" target="_blank" rel="nofollow"><img src="images/dab-pbv.jpg" alt="DAB project running on Power Board Visualizer GUI" width="800" class="inline"/> </a> </center> <center>  DAB project running on Power Board Visualizer GUI  </center> <ol type="1">
<li>Start Fwd / Stop / Start Rev Button<ul>
<li>This button toggles the application on and off and allows user to select the mode of operation, either forward mode or reverse mode operation. Each button press sends a corresponding message over CANFD. For detailed CAN message descriptions, click on the Info tab.</li>
<li><b> NOTE: </b> To carefully transition the mode from forward to reverse operation, and vice versa, the operation needs to be stop first.</li>
</ul>
</li>
<li>Voltage Output for Forward and Reverse operation, Current Output, and Power Output Reference Sliders<ul>
<li>These sliders are used to set reference values for output voltage, current, and power for the DAB. The lowest value among them will control the output. Ensure to press the Set button below the slider to communicate the reference value to the microcontroller. A dedicated voltage output setup for Forward and reverse operation is provided to the user.</li>
</ul>
</li>
<li>Comm Status and COM Selector<ul>
<li>The "COM?" button lists all available communication ports for the PBV. If the Peak Dongle drivers are installed and the Peak USB dongle is connected, it will appear as PCAN_USB:FD. Select the appropriate port and click enable. The Power Board Visualizer will then open the selected Comm port.</li>
</ul>
</li>
<li>DAB Controller State<ul>
<li>This section displays the current state of the system. Detailed information about each state and the state machine can be found in the Firmware Overview section.</li>
</ul>
</li>
<li>DAB Status Flags<ul>
<li>This section lists the high-level state of the system and any fault conditions that occur. It also shows as to what DAB operation is currently active (ie. Forward or Reverse mode of operation)</li>
</ul>
</li>
</ol>
<h4>Sequence of Actions to Power On</h4>
<p>After opening the appropriate Power Board Visualizer project, follow these steps to start the board:</p>
<ol type="1">
<li>Select the correct communication port and enable it.</li>
<li>Verify that everything is set up correctly by checking for status/housekeeping data and ensuring the system is in the PCS_STANDBY state. Confirm that the correct operation mode is programmed by examining the status flags.</li>
<li>Adjust the reference voltage/current if necessary.</li>
<li>Click on "Start Fwd" for Forward mode or "Start Rev" for Reverse mode. The system will quickly transition through various states and should eventually reach the PCS_UP_AND_RUNNING state.</li>
<li>When changing DAB mode of operation, click on "Stop" to end the previous operation, then initiate the "Start" on the newly desired DAB mode of operation.</li>
</ol>
<center><a href="images/dab-fwd-mode.jpg" target="_blank" rel="nofollow"><img src="images/dab-fwd-mode.jpg" alt="DAB in Forward mode Operation" width="800" class="inline"/> </a> </center> <center>  DAB in Forward Mode Operation  </center> <center><a href="images/dab-stop.jpg" target="_blank" rel="nofollow"><img src="images/dab-stop.jpg" alt="DAB in StandBy State" width="800" class="inline"/> </a> </center> <center>  DAB in StandBy State  </center> <center><a href="images/dab-rev-mode.jpg" target="_blank" rel="nofollow"><img src="images/dab-rev-mode.jpg" alt="DAB in Reverse Mode Operation" width="800" class="inline"/> </a> </center> <center>  DAB in Reverse Mode Operation  </center> <hr  />
<p> &copy; 2025, Microchip Technology Inc. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath" style="padding-bottom: 12px; vertical-align: bottom;"><!-- id is needed for treeview function! -->
  <ul>
    <p class="footer" style="text-align: center; font-size: 90%;">
      © Copyright 1998-2022 Microchip Technology Inc. All rights reserved.
    </p>
    </ul>
</div>
</body>
</html>
